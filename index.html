<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Lernlandschaft – Weimarer Republik (Sek II)</title>

  <style>
    /* ===== GLOBAL ===== */
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      margin: 0;
      background:
        linear-gradient(rgba(120,120,130,0.72), rgba(120,120,130,0.72)),
        url('assets/hitler.jpg') center / cover fixed;
    }

    header {
      background: rgba(31,36,48,0.92);
      color: #ffffff;
      padding: 2.5rem;
    }

    section {
      background: rgba(255,255,255,0.94);
      max-width: 980px;
      margin: 2.5rem auto;
      padding: 2.5rem;
      border-radius: 14px;
      box-shadow: 0 8px 22px rgba(0,0,0,.08);
    }

    h2 { margin-top: 0; }

    .path {
      background: #eef1f7;
      padding: 1rem;
      border-left: 5px solid #5a78b4;
      margin-bottom: 2rem;
      border-radius: 6px;
    }

    .film-box {
      background: #eef3fb;
      padding: 1.2rem;
      border-radius: 10px;
      margin-bottom: 2rem;
    }

    .film-box a {
      display: inline-block;
      background: #5a78b4;
      color: #fff;
      text-decoration: none;
      padding: 0.7rem 1.4rem;
      border-radius: 8px;
      font-weight: 600;
    }

    .question {
      border-left: 4px solid #5a78b4;
      padding: 1.4rem;
      background: #f8f9fc;
      border-radius: 10px;
      margin-bottom: 2rem;
    }

    textarea {
      width: 100%;
      min-height: 130px;
      padding: 0.8rem;
      font-size: 1rem;
      margin-top: 0.6rem;
    }

    button {
      margin-top: 0.8rem;
      margin-right: 0.4rem;
      padding: 0.6rem 1.4rem;
      font-size: 1rem;
      border-radius: 8px;
      border: none;
      cursor: pointer;
    }

    .check { background: #5a78b4; color: #fff; }
    .next  { background: #4caf50; color: #fff; }
    .reset { background: #777; color: #fff; }

    .feedback {
      margin-top: 1rem;
      font-weight: 700;
    }

    .details {
      margin-top: 0.6rem;
    }

    .teacher {
      position: fixed;
      top: 1.2rem;
      right: 1.2rem;
      background: #5a78b4;
      color: #fff;
      border-radius: 10px;
      padding: 0.8rem 1.2rem;
      cursor: pointer;
      font-weight: 600;
      z-index: 9999;
    }

    /* ===== PDF EXPORT ===== */
    @media print {
      body {
        background: #fff !important;
      }
      header,
      .teacher,
      button,
      .film-box {
        display: none !important;
      }
      section {
        box-shadow: none;
        margin: 0;
        border-radius: 0;
      }
      textarea {
        border: none;
      }
    }
  </style>
</head>

<body>

<header>
  <h1>Lernlandschaft: Der Weg von Weimar zu Hitler</h1>
  <p>Sek II · gewichtete Auswertung · transparente Bewertung</p>
  <button onclick="exportPDF()">PDF exportieren (Fragen & Antworten)</button>
</header>

<div class="teacher" onclick="enterTeacherMode()">Lehrer:innenbereich</div>

<!-- MODUL 1 -->
<section id="modul1">
  <div class="path"><strong>Lernpfad:</strong> Ursachen → Präsidialkabinette → Hitler</div>
  <h2>Modul 1: Ursachen des Scheiterns der Weimarer Republik</h2>

  <div class="film-box">
    <a href="https://www.dropbox.com/scl/fi/ay52suureq2m2cxtsfp2a/Das-Scheitern-der-Weimarer-Republik-Ursachen-Grundz-ge.mp4?dl=0" target="_blank">
      Film extern öffnen – Ursachen Weimar
    </a>
  </div>

  <div class="question" data-max="11"
       data-terms='{"versailler":3,"dolchstoß":2,"weltwirtschaftskrise":3,"inflation":2,"antidemokratisch":1}'>
    <p><strong>1. Warum gab es keine einzelne Ursache für das Scheitern der Weimarer Republik?</strong></p>
    <textarea></textarea>
    <button class="check" onclick="checkAnswer(this)">Antwort prüfen</button>
    <button class="next" disabled onclick="goNext('modul2')">Weiter</button>
    <button class="reset" onclick="resetQuestion(this)">Reset</button>
    <div class="feedback"></div>
    <div class="details"></div>
  </div>
</section>

<!-- MODUL 2 -->
<section id="modul2">
  <h2>Modul 2: Präsidialkabinette – Brüning, Papen, Schleicher</h2>

  <div class="film-box">
    <a href="https://www.dropbox.com/scl/fi/hyk9y5w57j8jusofwgxx6/Weimarer-Republik-Zusammenfassung-Pr-sidialkabinette-Br-ning-Papen-Schleicher-12.mp4?dl=0" target="_blank">
      Film extern öffnen (Teil 1)
    </a><br><br>
    <a href="https://www.dropbox.com/scl/fi/uancgp5ud2f7zfkt214h7/Weimarer-Republik-Zusammenfassung-Pr-sidialkabinette-Br-ning-Papen-Schleicher-22.mp4?dl=0" target="_blank">
      Film extern öffnen (Teil 2)
    </a>
  </div>

  <div class="question" data-max="10"
       data-terms='{"artikel 48":4,"notverordnung":3,"reichspräsident":2,"parlament":1}'>
    <p><strong>2. Warum stellten die Präsidialkabinette einen Systembruch dar?</strong></p>
    <textarea></textarea>
    <button class="check" onclick="checkAnswer(this)">Antwort prüfen</button>
    <button class="next" disabled onclick="goNext('modul3')">Weiter</button>
    <button class="reset" onclick="resetQuestion(this)">Reset</button>
    <div class="feedback"></div>
    <div class="details"></div>
  </div>
</section>

<!-- MODUL 3 -->
<section id="modul3">
  <h2>Modul 3: Hitlers Aufstieg zur Macht (Terra X)</h2>

  <div class="film-box">
    <a href="https://www.dropbox.com/scl/fi/xiun3yfvx1xpnfkpbksni/Hitlers-Aufstieg-zur-Macht-Terra-X.mp4?dl=0" target="_blank">
      Film extern öffnen – Terra X
    </a>
  </div>

  <div class="question" data-max="10"
       data-terms='{"weltwirtschaftskrise":3,"eliten":2,"propaganda":2,"sa":2,"ernennung":1}'>
    <p><strong>3. Wie wurde Hitlers Ernennung zum Reichskanzler möglich?</strong></p>
    <textarea></textarea>
    <button class="check" onclick="checkAnswer(this)">Antwort prüfen</button>
    <button class="next" disabled onclick="goNext('modul4')">Weiter</button>
    <button class="reset" onclick="resetQuestion(this)">Reset</button>
    <div class="feedback"></div>
    <div class="details"></div>
  </div>
</section>

<!-- MODUL 4 -->
<section id="modul4">
  <h2>Modul 4: Adolf Hitler – Vom Niemand zum Diktator</h2>

  <div class="film-box">
    <a href="https://www.dropbox.com/scl/fi/x7j90ay6jn60j46zj14mw/Adolf-Hitlers-Aufstieg-Vom-Niemand-zum-Diktator.mp4?dl=0" target="_blank">
      Film extern öffnen – Vom Niemand zum Diktator
    </a>
  </div>

  <div class="question" data-max="10"
       data-terms='{"propaganda":3,"sa":2,"gewalt":2,"inszenierung":2,"netzwerk":1}'>
    <p><strong>4. Wie wirkten persönliche Faktoren Hitlers mit strukturellen Krisen zusammen?</strong></p>
    <textarea></textarea>
    <button class="check" onclick="checkAnswer(this)">Antwort prüfen</button>
    <button class="reset" onclick="resetQuestion(this)">Reset</button>
    <div class="feedback"></div>
    <div class="details"></div>
  </div>
</section>

<script>
let teacherMode = false;

function normalize(t) {
  return t.toLowerCase().replace(/ä/g,"ae").replace(/ö/g,"oe").replace(/ü/g,"ue");
}

function checkAnswer(btn) {
  const q = btn.closest(".question");
  const text = normalize(q.querySelector("textarea").value);
  const terms = JSON.parse(q.dataset.terms);
  let points = 0;
  let missing = [];

  for (const term in terms) {
    if (text.includes(normalize(term))) {
      points += terms[term];
    } else {
      missing.push(term);
    }
  }

  const max = parseInt(q.dataset.max);
  const percent = Math.round(points / max * 100);

  q.querySelector(".feedback").textContent =
    points + "/" + max + " Punkte (" + percent + " %)";

  q.querySelector(".details").innerHTML =
    (missing.length ? "Fehlende gewichtige Begriffe: " + missing.join(", ") : "Alle gewichtigen Begriffe enthalten.") +
    "<br><strong>" + (percent >= 40 ? "Inhaltlich tragfähig." : "Weiterarbeiten erforderlich.") + "</strong>";

  if (percent >= 40 || teacherMode) {
    const next = q.querySelector(".next");
    if (next) next.disabled = false;
  }
}

function resetQuestion(btn) {
  const q = btn.closest(".question");
  q.querySelector("textarea").value = "";
  q.querySelector(".feedback").textContent = "";
  q.querySelector(".details").textContent = "";
  const next = q.querySelector(".next");
  if (next && !teacherMode) next.disabled = true;
}

function goNext(id) {
  document.getElementById(id).scrollIntoView({behavior:"smooth"});
}

function exportPDF() {
  window.print();
}

function enterTeacherMode() {
  const pw = prompt("Passwort Lehrer:innenbereich:");
  if (pw === "Pfäffikon und Nuolen") {
    teacherMode = true;
    document.querySelectorAll(".next").forEach(b => b.disabled = false);
    alert("Lehrer:innenmodus aktiv.");
  }
}
</script>

</body>
</html>
