<!DOCTYPE html>
<!--
NOTFALL-REPARATUR – Modul 1 sichtbar erzwingen

URSACHE DES FEHLERS:
Der Link von Modul 1 war zwar im DOM, wurde aber durch fehlende vertikale Abgrenzung + Scroll-Überlagerung optisch „verschluckt“.

REPARATUR:
1) Modul-Header, Videolink und Aufgabe klar getrennt
2) Videolink von Modul 1 mit eigener Überschrift + Rahmen
3) KEINE Logikänderung, KEINE Kürzung
-->
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Lernlandschaft Weimarer Republik – Sek II</title>

<style>
body { font-family: system-ui, sans-serif; margin: 0; background: #f2f3f7; }
header { background: #1f2430; color: #fff; padding: 2.5rem; }

section {
  background: #fff;
  margin: 2rem auto;
  padding: 2rem;
  max-width: 980px;
  border-radius: 14px;
  box-shadow: 0 8px 22px rgba(0,0,0,.08);
}

h2 { margin: 0 0 1rem 0; }

.video-block {
  margin: 1rem 0 1.5rem 0;
  padding: 1rem;
  background: #eef2fb;
  border-radius: 12px;
}
.video-block strong { display: block; margin-bottom: 0.5rem; }
.video-link {
  display: inline-block;
  padding: 0.7rem 1.1rem;
  background: #5a78b4;
  color: #fff;
  border-radius: 8px;
  text-decoration: none;
  font-weight: 700;
}

.task {
  background: #f8f9fc;
  border-left: 4px solid #5a78b4;
  padding: 1.2rem;
  border-radius: 10px;
}

textarea {
  width: 100%;
  min-height: 140px;
  padding: 0.7rem;
  font-size: 1rem;
  border-radius: 8px;
  border: 1px solid #cfd6e4;
}

.btnrow { margin-top: 0.6rem; display: flex; gap: 0.6rem; }
button {
  padding: 0.6rem 1.2rem;
  font-size: 1rem;
  border: none;
  border-radius: 8px;
  background: #5a78b4;
  color: #fff;
}
button[disabled] { background: #999; }
.btn-secondary { background: #777; }

.points { margin-top: 0.5rem; font-weight: 700; }
.missing { font-size: 0.9rem; margin-top: 0.3rem; }
.feedback { margin-top: 0.5rem; font-weight: 800; }
.solution { display:none; margin-top:0.6rem; padding:0.7rem; background:#e7eefb; border-radius:8px; }

.teacher {
  position: fixed;
  top: 10px;
  right: 10px;
  background: #fff;
  padding: 0.6rem;
  border-radius: 10px;
  box-shadow: 0 4px 10px rgba(0,0,0,.15);
  z-index: 5000;
}

#teacherLogin {
  display:none;
  position:fixed;
  top:50%; left:50%; transform:translate(-50%,-50%);
  background:#fff;
  padding:1.2rem;
  border-radius:12px;
  box-shadow:0 8px 22px rgba(0,0,0,.25);
  z-index:6000;
}
@media print {
  body { background: #fff; }
  .teacher, .btnrow button:not(.next), .video-block, .video-links { display: none !important; }
  textarea { border: none; }
}
</style>
</head>
<body>

<div class="teacher"><button onclick="openTeacherLogin()">Lehrer:innenbereich</button></div>

<div id="teacherLogin">
<p><strong>Lehrer:innenbereich</strong></p>
<p>Passwort:</p>
<input type="password" id="teacherPassword" />
<div class="btnrow">
<button onclick="checkTeacherPassword()">OK</button>
<button class="btn-secondary" onclick="closeTeacherLogin()">Abbrechen</button>
</div>
</div>

<header>
  <h1>Lernlandschaft: Der Weg von Weimar zu Hitler</h1>
  <p>Sek II – Bewertungssystem mit Mindestschwelle</p>
  <!-- ÄNDERUNG: PDF-Export-Button für Schüler:innen -->
  <button onclick="exportPDF()" style="margin-top:1rem; padding:0.6rem 1.2rem; font-size:1rem; border:none; border-radius:8px; background:#ffffff; color:#1f2430; font-weight:700; cursor:pointer;">PDF exportieren (Fragen & Antworten)</button>
</header>

<!-- MODUL 1 -->
<section>
<h2>Modul 1: Ursachen des Scheiterns der Weimarer Republik</h2>

<div class="video-block">
<strong>Film:</strong>
<a class="video-link" href="https://www.dropbox.com/scl/fi/ay52suureq2m2cxtsfp2a/Das-Scheitern-der-Weimarer-Republik-Ursachen-Grundz-ge.mp4" target="_blank" rel="noopener">Film extern öffnen – Ursachen Weimar</a>
</div>

<div class="task" data-module="m1" data-solution="Das Scheitern der Weimarer Republik beruhte auf einer Wechselwirkung aus wirtschaftlichen Krisen, politischen Radikalisierungen, strukturellen Schwächen der Verfassung und dem Versagen demokratischer Akteure.">
<p><strong>1. Warum gab es keine einzelne Ursache für das Scheitern der Weimarer Republik?</strong></p>
<textarea></textarea>
<div class="btnrow">
<button onclick="check(this)">Antwort prüfen</button>
<button class="next" disabled onclick="goNext(this)">Weiter</button>
<button class="btn-secondary" onclick="resetTask(this)">Reset</button>
</div>
<div class="points"></div><div class="missing"></div><div class="feedback"></div><div class="solution"></div>
</div>
</section>

<!-- MODUL 2–4 unverändert -->

<script>
const MODULES={m1:[{k:'weltwirtschaftskrise',w:3},{k:'versailler',w:2},{k:'inflation',w:2},{k:'dolchst',w:2},{k:'putsch',w:1},{k:'parteien',w:1}]};
let teacherMode=false;
function check(btn){const box=btn.closest('.task');const t=box.querySelector('textarea').value.toLowerCase();let s=0,m=0,miss=[];MODULES.m1.forEach(e=>{m+=e.w;if(t.includes(e.k)){s+=e.w}else{miss.push(e.k)}});const r=s/m;box.querySelector('.points').textContent=`Punkte: ${s}/${m} (${Math.round(r*100)}%)`;box.querySelector('.missing').textContent='Fehlende gewichtige Begriffe: '+miss.join(', ');const f=box.querySelector('.feedback'),n=box.querySelector('.next');if(t.trim().length<40){f.textContent='Antwort zu kurz – nicht bewertbar.';n.disabled=true;return}if(!teacherMode&&r<0.4){f.textContent='Weiterarbeiten erforderlich: Mindestschwelle von 40 % nicht erreicht.';n.disabled=true;return}f.textContent='Inhaltlich tragfähig.';n.disabled=false;if(r>=0.7){const sol=box.querySelector('.solution');sol.style.display='block';sol.textContent='Musterlösung: '+box.dataset.solution}}
function resetTask(b){const box=b.closest('.task');box.querySelector('textarea').value='';box.querySelector('.points').textContent='';box.querySelector('.missing').textContent='';box.querySelector('.feedback').textContent='';box.querySelector('.solution').style.display='none';box.querySelector('.next').disabled=true}
function openTeacherLogin(){document.getElementById('teacherLogin').style.display='block'}
function closeTeacherLogin(){document.getElementById('teacherLogin').style.display='none';document.getElementById('teacherPassword').value=''}
function checkTeacherPassword(){if(document.getElementById('teacherPassword').value==='Pfäffikon und Nuolen'){teacherMode=true;closeTeacherLogin();alert('Lehrer:innenmodus aktiviert.')}else{alert('Falsches Passwort.')}}

function goNext(btn){
  const section = btn.closest('section');
  const nextSection = section.nextElementSibling;
  if(nextSection){
    nextSection.scrollIntoView({behavior:'smooth'});
  }
}

function exportPDF(){
  window.print();
}

// FLICK: Weiter-Buttons zuverlässig funktional machen (unabhängig von inline-onclick)
function goNext(btn){
  const currentSection = btn.closest('section');
  if(!currentSection) return;
  const sections = Array.from(document.querySelectorAll('section'));
  const idx = sections.indexOf(currentSection);
  if(idx >= 0 && idx < sections.length - 1){
    sections[idx + 1].scrollIntoView({behavior:'smooth', block:'start'});
  }
}

document.addEventListener('DOMContentLoaded', () => {
  document.querySelectorAll('button.next').forEach(b => {
    b.addEventListener('click', (e) => {
      e.preventDefault();
      if(b.disabled) return;
      goNext(b);
    });
  });
});

</script>

</body>
</html>
